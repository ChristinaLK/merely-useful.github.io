# Data Manipulation {#r-data-manipulation}

## Questions {#r-data-manipulation-questions}

```{r, child="questions/r-data-manipulation.md"}
```

## How can I read tabular data into a program?

### What is tabular data?

Tabular data describes data that is in the form of a table: values arranged in rows each of the same length, or equivalently values arranged in columns each of the same length. Here's a small example of some tabular data:
```{r, echo = FALSE, message=FALSE}
library(tidyverse)
library(here)
example_csv <- here("data", "site.csv")
sites <- read_csv(example_csv )
knitr::kable(sites)
```

Each row records information on a site at which water measurements are taken.  There are three columns: a site identification code, and the location of the site in latitude and longitude. 

This is an incredibly common way of *displaying* data, but when *storing* tabular data in a file, we need a way to communicate when records and values begin and end.  A very popular format for doing this is CSV.  CSV, is short for **c**omma **s**eparated **v**alues, and like the name suggests, a comma, `,`, is used to separate the values for each column, while each record goes on a new line.  The file is plain text, but we use the extension `.csv` to indicate that is follows the CSV format conventions.

Here's how the table above would look inside a CSV file:
```{r, echo = FALSE, comment = NA}
writeLines(readLines(example_csv))
```

In this case the first line has the column names, this is common (and reccomended!), but not universal. 

Why is CSV so popular? 

* It's human readable.  CSV isn't a special file type, it is just a plain text file that follows some conventions.  This means you don't need any special software to look at the contents -- you can open in up in anything that can examine text and take a look inside. 

* It's computer readable.  Because CSV files all have the same structure it's easy to write computer programs to read them.  This means in almost any program designed to work with data, and all the common programming languages, you'll find functions that will import CSV files.  This also means it's easy to create CSV files -- you can export them from Excel, write them from R, or even write one from scratch in a text editor.

If you want to look inside a CSV file in RStudio you can navigate to its location in the "Files" pane and click on its name.  Selecting "View File", will open it in the Source pane. 

However, if you want to work with CSV data in R, it isn't enough to look inside the file.  You need to read the contents of the file and store it in R's memory.  This process is known as data import.

### Importing CSV data into R

## How can I select subsets of my data?

-   select
-   filter
-   arrange
-   Boolean conditions

## How can I calculate new values?

-   mutate
-   ifelse

## How can I tell what's gone wrong in my programs?

-   reading error messages
-   the difference between syntax and runtime errors

## How can I operate on subsets of my data?

-   group
-   summarize
-   split-apply-combine

## How can I work with two or more datasets?

-   join

## How can I save my results?

-   writing files

